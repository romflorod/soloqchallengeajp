<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Leaderboard LoL</title>
  <style>
    body { font-family: Arial, sans-serif; background: #0f172a; color: #e5e7eb; }
    .card { background: #1e293b; padding: 16px; margin: 10px; border-radius: 10px; width: 220px; }
    .tier { font-weight: bold; }
  </style>
</head>
<body>

<h1>Leaderboard</h1>
<div id="leaderboard"></div>

<script>
const players = [
  { summonerName: "CriticalBilbo", tag: "SVQ" },
  { summonerName: "AnotherName", tag: "EUW" }
];

const API_BASE = "https://soloqchallengeajp.vercel.app/api/player.py";

async function loadLeaderboard() {
  const leaderboard = document.getElementById("leaderboard");
  leaderboard.innerHTML = "Cargando...";

  const results = [];

  for (const p of players) {
    try {
      const url = `${API_BASE}?name=${encodeURIComponent(p.summonerName)}&tag=${encodeURIComponent(p.tag)}`;
      console.log(`[Frontend] Fetching: ${url}`);
      
      const res = await fetch(url);
      console.log(`[Frontend] Response status: ${res.status}`);
      
      const data = await res.json();
      console.log(`[Frontend] Response data:`, data);
      
      results.push(data);
    } catch (err) {
      console.error(`[Frontend] Error loading ${p.summonerName}:`, err);
      results.push({
        name: p.summonerName,
        tag: p.tag,
        tier: "ERROR",
        rank: "",
        lp: 0,
        wins: 0,
        losses: 0
      });
    }
  }

  leaderboard.innerHTML = "";

  results.forEach(p => {
    const div = document.createElement("div");
    div.className = "card";
    div.innerHTML = `
      <div class="tier">${p.name}#${p.tag}</div>
      <div>${p.tier} ${p.rank}</div>
      <div>${p.lp} LP</div>
      <div>${p.wins}W / ${p.losses}L</div>
    `;
    leaderboard.appendChild(div);
  });
}

loadLeaderboard();
</script>

</body>
</html>
